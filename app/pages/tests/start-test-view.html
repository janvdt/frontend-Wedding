<script src="assets/js/fitts.js" type="text/javascript"></script>
<div class="tests main">
	<div class="test-overview overview large-12 columns">
		<div class="top">
			<div class="large-12 columns no-pad">
				<div class="large-8 columns no-pad">
					<h2>{{test.name}}</h2>
				</div>
			</div>
			<hr class="divider" />
		</div>
	</div>
	<div class="svg-container large-12 columns">
		<div class="display noselect large-8 columns no-pad-left">
			<svg width="100%" height="100%" id="svg" class="svg"></svg>
		</div>
		<div class="large-4 columns no-pad-right">
			<h4>Color palette</h4>
			<p>Click an element on the display to adjust it's color.</p>
			<div class="adjust-element">
				<div class="target-active-container element">
					<span class="target"></span>
					<h5>Target color</h5>
				</div>
				<div class="circle-container hidden element">
					<span class="circle"></span>
					<h5>Circle color</h5>
				</div>
				<div class="svg-canvas-container hidden element">
					<span class="display"></span>
					<h5>Display color</h5>
				</div>
				<div class="color-selector">
					<div></div>
				</div>
			</div>
			<div class="form-group"><a href="" class="button tiny success" id="startIdtTest" ng-click="setColors(test.uuid)">start test</a>
			</div>
		</div>
	</div>
</div>
<script>
$(document).ready(function(){
	var selectedElement = "target";

	$("#svg").mousedown(function(e){
		element = $(e.target);
		selectedElement = selectElement(element.attr('class'));
	});
	
	$('.color-selector').ColorPicker({
		flat: true,
		color: '#519fb7',
		onChange: function (hsb, hex, rgb) {
			$('.' + selectedElement).css('backgroundColor', '#' + hex);
			$('.' + selectedElement).css('fill', '#' + hex);
		},
		onSubmit: function(hsb, hex, rgb) {
			$('.color-selector').ColorPickerSetColor(hex);
		}
	});
});

function selectElement(element){
	$('.element').addClass('hidden');
	switch(element){
		case "target":
			$('.target-active-container').removeClass('hidden');
			return "target";
		break;
		case "svg":
			$('.svg-canvas-container').removeClass('hidden');
			return "display";
		break;
		default:
			$('.circle-container').removeClass('hidden');
			return "circle";
		break;
	}
}
</script>